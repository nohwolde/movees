(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6610],{6126:function(e,l,s){Promise.resolve().then(s.bind(s,24884))},24884:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return v}});var t={};s.r(t),s.d(t,{default:function(){return A}});var r=s(57437),a=s(2265),i=s(48871),A={src:"/_next/static/media/banner2.348ad41b.jpg",height:628,width:1920,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAMACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABgEBAQAAAAAAAAAAAAAAAAAAAwX/2gAMAwEAAhADEAAAAIsFN//EABwQAAEDBQAAAAAAAAAAAAAAAAIAAwYEBTEyUv/aAAgBAQABPwCllkiPa5OZ5Ff/xAAZEQACAwEAAAAAAAAAAAAAAAACEgABIjH/2gAIAQIBAT8AYmLV9n//xAAXEQADAQAAAAAAAAAAAAAAAAABAyEA/9oACAEDAQE/AHRhAm//2Q==",blurWidth:8,blurHeight:3},n=s(16463),o=s(86440),d=s(81634),c=s(78077),u=s(66648),m=s(94382),h=s(78850),x=s(7155),f=s(973),v=()=>{var e,l;let{scKey:s,setScKey:A}=(0,d.Jt)(),{setCurrentTrack:v}=(0,d.nP)(),g=(0,n.useRouter)(),[p,j]=(0,a.useState)({full_name:"",username:"",avatar_url:"",followers_count:0,description:"",visuals:{visuals:[{visual_url:""}]}}),[w,_]=(0,a.useState)(null),[k,E]=(0,a.useState)(null),[N,C]=(0,a.useState)(""),[b,B]=(0,a.useState)(null),[I,Q]=(0,a.useState)(null),[y,S]=(0,a.useState)(null),[P,D]=(0,a.useState)(null),[M,F]=(0,a.useState)("All"),Z=(0,n.useSearchParams)().get("id"),L=(e,l)=>(0,r.jsx)("div",{children:(0,r.jsx)("div",{children:(0,r.jsx)(x.Z,{data:e,onClick:l,children:(0,r.jsx)("div",{className:"items-end",children:(0,r.jsx)(f.Z,{songId:e.href})})})})},e.id);(0,a.useEffect)(()=>{s&&(0,o.fZ)(Z,s).then(e=>{console.log(e),j(e.response),e.newKey&&e.newKey!==s&&(console.log("Setting new key"),A(e.newKey))})},[s]),(0,a.useEffect)(()=>{s&&(0,o.GW)(Z,s).then(e=>{console.log(e),_(e.response)})},[s]),(0,a.useEffect)(()=>{s&&(0,o.yQ)(Z,s).then(e=>{console.log(e),E(e.response)})},[s]),(0,a.useEffect)(()=>{s&&(0,o.op)(Z,s).then(e=>{console.log(e),Q(e.response)})},[s]),(0,a.useEffect)(()=>{s&&(0,o.MD)(Z,s).then(e=>{console.log(e),B(e.response)})},[s]),(0,a.useEffect)(()=>{s&&(0,o.MD)(Z,s).then(e=>{console.log(e),S(e.response)})},[s]),(0,a.useEffect)(()=>{(async()=>{(null==p?void 0:p.avatar_url)&&C(await (0,o._u)(null==p?void 0:p.avatar_url))})()},[null==p?void 0:p.avatar_url]);let U=(e,l)=>{var t;let i=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let t=new IntersectionObserver(async t=>{if(t[0].isIntersecting&&(console.log("Intersecting"),(null==e?void 0:e.next_href)&&s)){console.log("Getting Next Page");let t=(await (0,o.I_)(null==e?void 0:e.next_href,1,s)).response;console.log(t),l({...t,collection:[...e.collection,...t.collection]})}});return i.current&&t.observe(i.current),()=>{i.current&&t.unobserve(i.current)}},[i,e,s]),(0,r.jsxs)("div",{children:[e&&(null===(t=e.collection)||void 0===t?void 0:t.map(e=>"track"===e.kind?L({id:e.id,artists:[e.user],name:e.title,href:e.permalink_url,image_path:e.artwork_url,waveform_url:e.waveform_url,track_authorization:e.track_authorization,likes_count:e.likes_count,media:e.media,platform:"Soundcloud"},()=>{v({...e,platform:"Soundcloud"})}):"playlist"===e.kind?(0,r.jsx)(m.Z,{data:{id:e.id,name:e.title,href:e.permalink_url,image_path:e.artwork_url,description:e.description||"",tracks:e.tracks,track_count:e.track_count,likes_count:e.likes_count,duration:e.duration,display_date:e.display_date,is_album:e.is_album||!1,user:e.user,platform:"Soundcloud"},onClick:()=>{g.push("/sc/playlist/".concat(e.id))}},e.id):"user"===e.kind?(0,r.jsx)(h.Z,{data:{id:e.id,username:e.username,name:e.full_name,description:e.description,track_count:e.track_count,followers_count:e.followers_count,permalink:e.permalink,verified:e.verified,image_path:e.avatar_url,visuals:e.visuals,platform:"Soundcloud"},onClick:()=>{g.push("/sc/user/".concat(e.id))}},e.id):void 0)),(0,r.jsx)("div",{ref:i})]})};return(0,r.jsx)("div",{className:" bg-neutral-900 rounded-lg  h-full  w-full  overflow-hidden  overflow-y-auto ",children:(0,r.jsxs)("div",{className:" bg-neutral-900 rounded-lg  h-full  w-full  overflow-hidden  overflow-y-auto ",children:[(0,r.jsx)(i.default,{className:(0,c.m)("\n          bg-gradient-to-b \n          from-blue-900\n          to-b\n          "),children:(0,r.jsxs)("div",{className:"rounded-md h-64 relative",children:[(0,r.jsx)(u.default,{src:(null==p?void 0:null===(l=p.visuals)||void 0===l?void 0:null===(e=l.visuals[0])||void 0===e?void 0:e.visual_url)||t,alt:"Banner",layout:"fill",objectFit:"cover",className:"inset-0 backdrop-blur-md rounded-md max-h-[250px]"}),(0,r.jsxs)("div",{className:"flex justify-center items-center mt-4 absolute ",children:[(0,r.jsx)("img",{className:"w-48 h-48 rounded-full",src:N||(null==p?void 0:p.avatar_url),alt:null==p?void 0:p.username}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:null==p?void 0:p.full_name}),(0,r.jsxs)("p",{className:"text-gray-500",children:["@",null==p?void 0:p.username]})]})]})]})}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-col",children:[(0,r.jsx)("div",{className:"flex md:w-full md:sticky md:top-0 bg-neutral-900 justify-center items-center",children:["All","Popular tracks","Tracks","Albums","Playlists","Reposts"].map(e=>(0,r.jsx)("button",{className:"p-4 ".concat(M===e?"text-white text-2xl":"text-md text-gray-500 hover:text-xl hover:text-gray-400"),onClick:()=>F(e),children:e},e))}),(0,r.jsxs)("div",{className:"md:w-full p-4 ",children:["All"===M&&(0,r.jsx)(()=>(0,r.jsx)("div",{children:U(w,_)}),{}),"Popular tracks"===M&&(0,r.jsx)(()=>(0,r.jsx)("div",{children:U(k,E)}),{}),"Tracks"===M&&(0,r.jsx)(()=>(0,r.jsx)("div",{children:U(w,_)}),{}),"Albums"===M&&(0,r.jsx)(()=>(0,r.jsx)("div",{children:U(I,Q)}),{}),"Playlists"===M&&(0,r.jsx)(()=>(0,r.jsx)("div",{children:U(b,B)}),{}),"Reposts"===M&&(0,r.jsx)(()=>(0,r.jsx)("div",{children:U(y,S)}),{})]})]})]})})}},973:function(e,l,s){"use strict";var t=s(57437),r=s(2265),a=s(61379),i=s(16463),A=s(88726),n=s(34728),o=s(89362),d=s(56480);l.Z=e=>{let{songId:l,song:s}=e,c=(0,i.useRouter)(),{supabaseClient:u}=(0,n.useSessionContext)(),m=(0,d.Z)(),{user:h}=(0,o.aF)(),[x,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(null==h?void 0:h.id)&&(async()=>{let{data:e,error:s}=await u.from("liked_songs").select("*").eq("user_id",h.id).eq("song_id",l).single();!s&&e&&f(!0)})()},[l,u,null==h?void 0:h.id]);let v=x?a.M_L:a.lo,g=async()=>{if(!h)return m.onOpen();if(x){let{error:e}=await u.from("liked_songs").delete().eq("user_id",h.id).eq("song_id",l);e?A.Am.error(e.message):f(!1)}else{let{data:e,error:t}=await u.from("songs").select("id").eq("id",l);if(!(null==e?void 0:e.length)){let{error:e}=await u.from("songs").insert([s]);if(e){A.Am.error(e.message);return}}let{error:r}=await u.from("liked_songs").insert({song_id:l,user_id:h.id});r?A.Am.error(r.message):(f(!0),A.Am.success("Success"))}c.refresh()};return(0,t.jsx)("button",{className:" cursor-pointer  hover:opacity-75  transition ",onClick:e=>{e.stopPropagation(),g()},children:(0,t.jsx)(v,{color:x?"#22c55e":"white",size:25})})}},7155:function(e,l,s){"use strict";var t=s(57437),r=s(66648),a=s(43765),i=s(57771);l.Z=e=>{let{data:l,onClick:s,children:A}=e,n=(0,a.Z)();return(0,t.jsxs)("div",{className:" flex  items-center  gap-x-3  cursor-pointer  hover:bg-neutral-800/50  w-full  p-2  rounded-md ",onClick:()=>s?s(l.id):n.setId(l.id),children:[(0,t.jsxs)("div",{className:" flex  items-center  cursor-pointer   gap-x-3 w-full  rounded-md ",children:[(0,t.jsx)("div",{className:" relative  rounded-md  min-h-[60px]  min-w-[60px]  overflow-hidden ",children:(0,t.jsx)(r.default,{fill:!0,src:l.image_path||i.default,alt:"MediaItem",className:"object-cover"})}),(0,t.jsx)("div",{className:"flex flex-col gap-y-1 overflow-hidden",children:(0,t.jsx)("p",{className:"text-white truncate",children:l.name})})]}),A]})}},94382:function(e,l,s){"use strict";var t=s(57437),r=s(66648),a=s(43765);l.Z=e=>{var l;let{data:s,onClick:i}=e,A=(0,a.Z)();return(0,t.jsxs)("div",{onClick:()=>i?i(s.id):A.setId(s.id),className:" flex  items-center  gap-x-3  cursor-pointer  hover:bg-neutral-800/50  w-full  p-2  rounded-md ",children:[(0,t.jsx)("div",{className:" relative  rounded-md  min-h-[80px]  min-w-[80px]  overflow-hidden ",children:(0,t.jsx)(r.default,{fill:!0,src:s.image_path||"/images/music-placeholder.png",alt:"MediaItem",className:"object-cover"})}),(0,t.jsxs)("div",{className:"flex-col gap-y-1 overflow-hidden",children:[(0,t.jsx)("p",{className:"text-white text-md truncate",children:s.name}),(0,t.jsx)("div",{className:"flex gap-x-2 overflow-hidden items-center",children:(0,t.jsx)("p",{className:"text-neutral-400 text-sm truncate",children:s.user.username})}),(0,t.jsx)("div",{className:"my-2",children:null===(l=s.tracks)||void 0===l?void 0:l.slice(0,3).map(e=>(0,t.jsxs)("div",{className:"           flex  items-center  gap-x-3  cursor-pointer  hover:bg-neutral-800/50  w-full  p-2  ",children:[(0,t.jsx)("div",{className:" relative  rounded-md  min-h-[48px]  min-w-[48px]  overflow-hidden ",children:(0,t.jsx)(r.default,{fill:!0,src:e.artwork_url||"/images/music-placeholder.png",alt:"MediaItem",className:"object-cover"})}),(0,t.jsx)("p",{className:"text-white text-sm truncate",children:e.title},e.id)]},e.id))}),(0,t.jsx)("p",{className:"text-neutral-400 text-sm truncate",children:"VIEW FULL PLAYLIST"})]})]})}},78850:function(e,l,s){"use strict";var t=s(57437),r=s(66648),a=s(43765);l.Z=e=>{let{data:l,onClick:s}=e,i=(0,a.Z)();return(0,t.jsxs)("div",{onClick:()=>s?s(l.id):i.setId(l.id),className:" flex  items-center  gap-x-3  cursor-pointer  hover:bg-neutral-800/50  w-full  p-2  rounded-md ",children:[(0,t.jsx)("div",{className:" relative  rounded-full  min-h-[70px]  min-w-[70px]  overflow-hidden ",children:(0,t.jsx)(r.default,{fill:!0,src:l.image_path||"/images/music-placeholder.png",alt:"MediaItem",className:"object-cover"})}),(0,t.jsx)("div",{className:"flex flex-col gap-y-1 overflow-hidden",children:(0,t.jsx)("p",{className:"text-white truncate",children:l.username})})]})}},57771:function(e,l,s){"use strict";s.r(l),l.default={src:"/_next/static/media/playlist.9ff5369c.jpeg",height:1080,width:1080,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABgEBAQAAAAAAAAAAAAAAAAAAAAX/2gAMAwEAAhADEAAAALsVH//EABkQAAEFAAAAAAAAAAAAAAAAAAAREyJhYv/aAAgBAQABPwCDels//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPwB//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwB//9k=",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[2420,6115,9450,1787,9982,5722,3712,8077,7057,8871,2971,7023,1744],function(){return e(e.s=6126)}),_N_E=e.O()}]);