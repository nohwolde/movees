(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2797],{94482:function(e,t,l){Promise.resolve().then(l.bind(l,56611)),Promise.resolve().then(l.bind(l,48871)),Promise.resolve().then(l.bind(l,53490))},56611:function(e,t,l){"use strict";var i=l(57437),s=l(7155),n=l(973),r=l(75942),a=l(66648),o=l(2265),d=l(89362),c=l(34728),u=l(16463),m=l(43765);l(1433);var v=l(31504),h=l(81634),x=l(94382),p=l(78850),f=l(86440);t.default=e=>{let{songs:t}=e,l=(0,u.useRouter)(),{searchType:A,setSearchType:g,searchTerm:j,setYtSearch:w,ytSearch:N,setSearchTerm:b,topResults:_,songResults:k,playlistResults:y,artistResults:C,albumResults:I,searchResults:S,isLoading:E,getNextPage:P,searchPage:Z,platform:B,setPlatform:Q}=(0,r.Rx)(),{scKey:L}=(0,h.Jt)(),{scResults:Y,setScResults:F,spotResults:M,ytResults:R,setYtResults:D}=(0,h.Rp)(),{currentTrack:O,setCurrentTrack:U}=(0,h.nP)(),T=[r.Sc.Top,r.Sc.Songs,r.Sc.Playlists,r.Sc.Artists,r.Sc.Albums],z=[r.Sc.Top,r.Sc.Songs,r.Sc.Playlists,r.Sc.Artists],V=B===r.t4.Youtube?z:T,W=B===r.t4.Youtube?"bg-red-600 text-white":B===r.t4.Spotify?"bg-green-600 text-white":"bg-orange-600 text-white",{user:G}=(0,d.aF)();(0,c.useSupabaseClient)();let q=(0,m.Z)(),J=()=>B!==r.t4.Youtube?A:A!==r.Sc.Albums?A:r.Sc.Top,K=(e,t)=>{var l,r,a;return(0,i.jsx)("div",{children:(0,i.jsx)("div",{children:(0,i.jsx)(s.Z,{data:e,onClick:t,children:(0,i.jsx)("div",{className:"items-end",children:(0,i.jsx)(n.Z,{songId:e.id,song:{id:null==e?void 0:e.id,author:{name:null==e?void 0:null===(l=e.user)||void 0===l?void 0:l.username,id:null==e?void 0:null===(r=e.user)||void 0===r?void 0:r.id,image:null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.avatar_url},name:null==e?void 0:e.title,image:null==e?void 0:e.artwork_url,media:{...null==e?void 0:e.media,track_authorization:null==e?void 0:e.track_authorization},platform:"Soundcloud"}})})})})},e.id)},H=(e,t)=>(0,i.jsx)(x.Z,{data:e,onClick:t}),X=e=>{var t,s,n,r,o,d,c,u,m;return(0,i.jsxs)("div",{onClick:()=>l.push("/channel?id=".concat(e.author.id)),className:" flex  items-center  gap-x-3  cursor-pointer  hover:bg-neutral-800/50  w-full  p-2  rounded-md ",children:[(0,i.jsx)("div",{className:" relative  rounded-full  min-h-[48px]  min-w-[48px]  overflow-hidden ",children:(0,i.jsx)(a.default,{fill:!0,src:(null==e?void 0:null===(s=e.author)||void 0===s?void 0:null===(t=s.thumbnails[0])||void 0===t?void 0:t.url.startsWith("https:"))?null==e?void 0:null===(r=e.author)||void 0===r?void 0:null===(n=r.thumbnails[0])||void 0===n?void 0:n.url:"https:"+(null==e?void 0:null===(d=e.author)||void 0===d?void 0:null===(o=d.thumbnails[0])||void 0===o?void 0:o.url),alt:"ArtistItem",className:"object-cover"})}),(0,i.jsxs)("div",{className:"flex-col gap-y-1 overflow-hidden",children:[(0,i.jsx)("p",{className:"text-white truncate",children:null==e?void 0:null===(c=e.author)||void 0===c?void 0:c.name}),(0,i.jsxs)("div",{className:"flex gap-x-2 overflow-hidden items-center",children:[(0,i.jsx)("p",{className:"text-neutral-400 text-sm truncate",children:null==e?void 0:null===(u=e.subscriber_count)||void 0===u?void 0:u.text}),(0,i.jsx)("p",{className:"text-neutral-400 text-sm truncate",children:"â€¢"}),(0,i.jsx)("p",{className:"text-neutral-400 text-sm truncate",children:null==e?void 0:null===(m=e.video_count)||void 0===m?void 0:m.text})]})]})]},e.id)},$=e=>{var t;return(0,i.jsxs)("div",{className:" flex  items-center  gap-x-3  cursor-pointer  hover:bg-neutral-800/50  w-full  p-2  rounded-md ",onClick:()=>l.push("/yt/playlist?id=".concat(e.id)),children:[(0,i.jsx)("div",{className:" relative  rounded-md  min-h-[100px]  min-w-[100px]  overflow-hidden ",children:(0,i.jsx)(a.default,{fill:!0,src:e.thumbnails[0].url||"/images/music-placeholder.png",alt:"ArtistItem",className:"object-cover"})}),(0,i.jsxs)("div",{className:"flex-col gap-y-1 overflow-hidden",children:[(0,i.jsx)("p",{className:"text-white text-md truncate",children:e.title.text}),(0,i.jsx)("div",{className:"flex gap-x-2 overflow-hidden items-center",children:(0,i.jsx)("p",{className:"text-neutral-400 text-sm truncate",children:e.author.name})}),(0,i.jsx)("div",{className:"my-2",children:null===(t=e.first_videos)||void 0===t?void 0:t.map(e=>(0,i.jsx)("p",{className:"text-white text-sm truncate",children:e.title.text},e.id))}),(0,i.jsx)("p",{className:"text-neutral-400 text-sm truncate",children:"VIEW FULL PLAYLIST"})]})]},e.id)};return(0,i.jsxs)("div",{className:"flex flex-col gap-y-2 w-full px-6",children:[(0,i.jsx)("div",{className:"flex flex-row gap-x-2",children:V.map(e=>(0,i.jsx)("button",{className:"\n              ".concat(e===J()?W:"bg-neutral-700 text-neutral-300"," \n              px-4 py-2 rounded-lg \n              focus:outline-none \n              focus:ring-2 \n              focus:ring-neutral-500 \n              focus:ring-offset-2 \n              focus:ring-offset-neutral-900\n            "),onClick:()=>g(e),children:e},e))}),B===r.t4.Youtube&&(()=>{let e=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let t=new IntersectionObserver(async e=>{if(e[0].isIntersecting){var t;if(console.log("Intersecting"),console.log(N),(null==N?void 0:null===(t=N.results)||void 0===t?void 0:t.length)>0&&(null==N?void 0:N.has_continuation)){console.log("Getting Next Page");let e=await (null==N?void 0:N.getContinuation());console.log(e),w(e),D([...R,...e.results])}}});return e.current&&t.observe(e.current),()=>{e.current&&t.unobserve(e.current)}},[e,N]),(0,i.jsxs)("div",{className:"flex flex-col gap-y-2 w-full px-6",children:[null==R?void 0:R.map(e=>{if("Video"===e.type){var t,l;return(0,i.jsx)(v.Z,{song:{id:e.id,author:e.author,name:e.title.text,href:"youtube.com"+(null===(l=e.endpoint)||void 0===l?void 0:null===(t=l.metadata)||void 0===t?void 0:t.url),image_path:e.thumbnails[0].url,views:e.short_view_count.text,platform:"Youtube"},onPlay:()=>{U({...e,platform:"Youtube"}),q.setId(e.id),q.setIds(null==N?void 0:N.results)}},e.id)}return"Channel"===e.type?X(e):"Playlist"===e.type?$(e):void 0}),(0,i.jsx)("div",{ref:e})]})})(),B===r.t4.Soundcloud&&(()=>{var e;let t=(0,o.useRef)(null);return((0,o.useEffect)(()=>{let e=new IntersectionObserver(async e=>{if(e[0].isIntersecting&&(console.log("Intersecting"),Y&&(null==Y?void 0:Y.next_href)&&L)){console.log("Getting Next Page");let e=(await (0,f.I_)(null==Y?void 0:Y.next_href,1,L)).response;console.log(e),F({...e,collection:[...Y.collection,...e.collection]})}});return t.current&&e.observe(t.current),()=>{t.current&&e.unobserve(t.current)}},[t,Y,L]),Y)?(0,i.jsxs)("div",{className:"flex flex-col gap-y-2 w-full px-6",children:[null==Y?void 0:null===(e=Y.collection)||void 0===e?void 0:e.map(e=>"track"===e.kind?K({id:e.id,artists:[e.user],name:e.title,href:e.permalink_url,image_path:e.artwork_url,waveform_url:e.waveform_url,track_authorization:e.track_authorization,likes_count:e.likes_count,media:e.media,platform:"Soundcloud"},()=>{l.push("/sc/track?id=".concat(e.id)),U({...e,platform:"Soundcloud"})}):"playlist"===e.kind?H({id:e.id,name:e.title,href:e.permalink_url,image_path:e.artwork_url,description:e.description||"",tracks:e.tracks,track_count:e.track_count,likes_count:e.likes_count,duration:e.duration,display_date:e.display_date,is_album:e.is_album||!1,user:e.user,platform:"Soundcloud"},()=>{l.push("/sc/playlist?id=".concat(e.id))}):"user"===e.kind?(0,i.jsx)(p.Z,{data:{id:e.id,username:e.username,name:e.full_name,description:e.description,track_count:e.track_count,followers_count:e.followers_count,permalink:e.permalink,verified:e.verified,image_path:e.avatar_url,visuals:e.visuals,platform:"Soundcloud"},onClick:()=>{l.push("/sc/user?id=".concat(e.id))}},e.id):void 0),(0,i.jsx)("div",{ref:t})]}):null})()]})}},84318:function(e,t,l){"use strict";l.d(t,{Z:function(){return d}});var i=l(57437),s=l(16463),n=l(34728),r=l(12947),a=l(66648),o={src:"/_next/static/media/expand.625cdf6a.svg",height:24,width:24,blurWidth:0,blurHeight:0},d=e=>{let{song:t}=e;(0,s.useRouter)();let{supabaseClient:l}=(0,n.useSessionContext)();(0,r.Z)();let{isOpen:d,onOpen:c,onClose:u,setSong:m}=(0,r.Z)();return(0,i.jsx)("button",{className:" cursor-pointer  hover:opacity-75  transition ",onClick:e=>{e.stopPropagation(),m(t),d||c()},children:(0,i.jsx)(a.default,{className:"object-contain",onClick:()=>{m(t),d||c()},src:o,style:{filter:"invert(100%)"},alt:"Image",width:25,height:25})})}},973:function(e,t,l){"use strict";var i=l(57437),s=l(2265),n=l(61379),r=l(16463),a=l(88726),o=l(34728),d=l(89362),c=l(56480);t.Z=e=>{let{songId:t,song:l}=e,u=(0,r.useRouter)(),{supabaseClient:m}=(0,o.useSessionContext)(),v=(0,c.Z)(),{user:h}=(0,d.aF)(),[x,p]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(null==h?void 0:h.id)&&(async()=>{let{data:e,error:l}=await m.from("liked_songs").select("*").eq("user_id",h.id).eq("song_id",t).single();!l&&e&&p(!0)})()},[t,m,null==h?void 0:h.id]);let f=x?n.M_L:n.lo,A=async()=>{if(!h)return v.onOpen();if(x){let{error:e}=await m.from("liked_songs").delete().eq("user_id",h.id).eq("song_id",t);e?a.Am.error(e.message):p(!1)}else{let{data:e,error:i}=await m.from("songs").select("id").eq("id",t);if(!(null==e?void 0:e.length)){let{error:e}=await m.from("songs").insert([l]);if(e){a.Am.error(e.message);return}}let{error:s}=await m.from("liked_songs").insert({song_id:t,user_id:h.id});s?a.Am.error(s.message):(p(!0),a.Am.success("Success"))}u.refresh()};return(0,i.jsx)("button",{className:" cursor-pointer  hover:opacity-75  transition ",onClick:e=>{e.stopPropagation(),A()},children:(0,i.jsx)(f,{color:x?"#22c55e":"white",size:25})})}},7155:function(e,t,l){"use strict";var i=l(57437),s=l(66648),n=l(43765),r=l(57771);t.Z=e=>{let{data:t,onClick:l,children:a}=e,o=(0,n.Z)();return(0,i.jsxs)("div",{className:" flex  items-center  gap-x-3  cursor-pointer  hover:bg-neutral-800/50  w-full  p-2  rounded-md ",onClick:()=>l?l(t.id):o.setId(t.id),children:[(0,i.jsxs)("div",{className:" flex  items-center  cursor-pointer   gap-x-3 w-full  rounded-md ",children:[(0,i.jsx)("div",{className:" relative  rounded-md  min-h-[60px]  min-w-[60px]  overflow-hidden ",children:(0,i.jsx)(s.default,{fill:!0,src:t.image_path||r.default,alt:"MediaItem",className:"object-cover"})}),(0,i.jsx)("div",{className:"flex flex-col gap-y-1 overflow-hidden",children:(0,i.jsx)("p",{className:"text-white truncate",children:t.name})})]}),a]})}},1433:function(e,t,l){"use strict";var i=l(57437),s=l(66648),n=l(57771);t.Z=e=>{let{playlist:t,image:l,onClick:r}=e;return(0,i.jsxs)("div",{onClick:r,className:" flex  items-center  gap-x-3  cursor-pointer  hover:bg-neutral-800/50  w-full  p-2  rounded-md ",children:[(0,i.jsx)("div",{className:" relative  rounded-md  min-h-[48px]  min-w-[48px]  overflow-hidden ",children:(0,i.jsx)(s.default,{fill:!0,src:l||n,alt:"ArtistItem",className:"object-cover"})}),(0,i.jsxs)("div",{className:"flex flex-col gap-y-1 overflow-hidden",children:[(0,i.jsx)("p",{className:"text-white truncate",children:t.name}),(0,i.jsx)("p",{className:"text-neutral-400 text-sm truncate",children:t.subtitle})]})]},t.id)}},94382:function(e,t,l){"use strict";var i=l(57437),s=l(66648),n=l(43765);t.Z=e=>{var t;let{data:l,onClick:r}=e,a=(0,n.Z)();return(0,i.jsxs)("div",{onClick:()=>r?r(l.id):a.setId(l.id),className:" flex  items-center  gap-x-3  cursor-pointer  hover:bg-neutral-800/50  w-full  p-2  rounded-md ",children:[(0,i.jsx)("div",{className:" relative  rounded-md  min-h-[80px]  min-w-[80px]  overflow-hidden ",children:(0,i.jsx)(s.default,{fill:!0,src:l.image_path||"/images/music-placeholder.png",alt:"MediaItem",className:"object-cover"})}),(0,i.jsxs)("div",{className:"flex-col gap-y-1 overflow-hidden",children:[(0,i.jsx)("p",{className:"text-white text-md truncate",children:l.name}),(0,i.jsx)("div",{className:"flex gap-x-2 overflow-hidden items-center",children:(0,i.jsx)("p",{className:"text-neutral-400 text-sm truncate",children:l.user.username})}),(0,i.jsx)("div",{className:"my-2",children:null===(t=l.tracks)||void 0===t?void 0:t.slice(0,3).map(e=>(0,i.jsxs)("div",{className:"           flex  items-center  gap-x-3  cursor-pointer  hover:bg-neutral-800/50  w-full  p-2  ",children:[(0,i.jsx)("div",{className:" relative  rounded-md  min-h-[48px]  min-w-[48px]  overflow-hidden ",children:(0,i.jsx)(s.default,{fill:!0,src:e.artwork_url||"/images/music-placeholder.png",alt:"MediaItem",className:"object-cover"})}),(0,i.jsx)("p",{className:"text-white text-sm truncate",children:e.title},e.id)]},e.id))}),(0,i.jsx)("p",{className:"text-neutral-400 text-sm truncate",children:"VIEW FULL PLAYLIST"})]})]})}},78850:function(e,t,l){"use strict";var i=l(57437),s=l(66648),n=l(43765);t.Z=e=>{let{data:t,onClick:l}=e,r=(0,n.Z)();return(0,i.jsxs)("div",{onClick:()=>l?l(t.id):r.setId(t.id),className:" flex  items-center  gap-x-3  cursor-pointer  hover:bg-neutral-800/50  w-full  p-2  rounded-md ",children:[(0,i.jsx)("div",{className:" relative  rounded-full  min-h-[70px]  min-w-[70px]  overflow-hidden ",children:(0,i.jsx)(s.default,{fill:!0,src:t.image_path||"/images/music-placeholder.png",alt:"MediaItem",className:"object-cover"})}),(0,i.jsx)("div",{className:"flex flex-col gap-y-1 overflow-hidden",children:(0,i.jsx)("p",{className:"text-white truncate",children:t.username})})]})}},31504:function(e,t,l){"use strict";var i=l(57437),s=l(16463),n=l(66648),r=l(973),a=l(84318),o=l(57771);t.Z=e=>{var t,l,d,c,u,m;let{song:v,onPlay:h,children:x}=e,p=(0,s.useRouter)();return(0,i.jsxs)("div",{onClick:()=>{h(v.id),p.push("/watch?id=".concat(v.id))},className:" flex  items-center  gap-x-3  cursor-pointer  hover:bg-neutral-800/50  w-full  p-2  rounded-md ",children:[(0,i.jsxs)("div",{className:" flex  items-center  gap-x-3  cursor-pointer  w-full  ",children:[(0,i.jsxs)("div",{className:" relative  rounded-md  min-h-[60px]  min-w-[60px]  overflow-hidden group ",children:[(0,i.jsx)(n.default,{fill:!0,src:v.image_path||o.default,alt:"Song",className:"object-cover"}),(0,i.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:x})]}),(0,i.jsxs)("div",{className:"flex-col gap-y-1 overflow-hidden",children:[(0,i.jsx)("p",{className:"text-white truncate pb-1",children:v.name}),(0,i.jsxs)("div",{className:"flex gap-x-2 overflow-hidden items-center",children:[(null===(t=v.author)||void 0===t?void 0:t.thumbnails)&&(null===(d=v.author)||void 0===d?void 0:null===(l=d.thumbnails)||void 0===l?void 0:l.length)>0&&(0,i.jsx)("div",{className:" relative  rounded-full  h-8 w-8 overflow-hidden ",children:(0,i.jsx)(n.default,{fill:!0,src:null===(u=v.author)||void 0===u?void 0:null===(c=u.thumbnails[0])||void 0===c?void 0:c.url,alt:"Artist",className:"object-cover"})}),(0,i.jsx)("p",{className:"text-neutral-400 text-sm truncate hover:text-white",onClick:e=>{var t;e.stopPropagation(),p.push("/channel?id=".concat(null===(t=v.author)||void 0===t?void 0:t.id))},children:null===(m=v.author)||void 0===m?void 0:m.name})]})]})]}),(0,i.jsx)("div",{className:"flex items-end",children:(0,i.jsxs)("div",{className:"flex gap-x-2 items-end justify-end",children:[(0,i.jsx)(r.Z,{songId:v.id}),(0,i.jsx)(a.Z,{song:{platform:"Youtube",id:v.id,name:v.name,image:v.image_path,author:v.author}})]})})]},v.id)}},12947:function(e,t,l){"use strict";let i=(0,l(39099).Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1}),song:null,setSong:t=>e({song:t})}));t.Z=i},57771:function(e,t,l){"use strict";l.r(t),t.default={src:"/_next/static/media/playlist.9ff5369c.jpeg",height:1080,width:1080,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABgEBAQAAAAAAAAAAAAAAAAAAAAX/2gAMAwEAAhADEAAAALsVH//EABkQAAEFAAAAAAAAAAAAAAAAAAAREyJhYv/aAAgBAQABPwCDels//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPwB//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwB//9k=",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[2420,6115,9450,1787,9982,5722,3712,8077,7057,8871,2971,7023,1744],function(){return e(e.s=94482)}),_N_E=e.O()}]);